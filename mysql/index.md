### 索引的定义
索引的定义就是帮助存储引擎快速获取数据的一种数据结构
 - 按数据结构分为：b+树，hash索引、full-text索引
 - 按物理存储分为：主键索引、二级索引
 - 按字段个数：单列索引，联合索引
 - 按字段特性：主键索引、唯一索引、普通索引、前缀索引   

在创建表的时候，inndb会根据不同场景选择不同的列作为索引
 - 有主键：会默认使用主键作为聚簇索引的索引键
 - 没有主键：选择一个不包含null值的唯一列作为聚簇索引的索引键，若没有这生成一个隐式的自增id列。  

b+树是一种多叉树，叶子结点才存放数据，非叶子节点只存放索引，而且每个节点里的数据是按照主键顺序存放的。每一层父节点的索引值都会出现在下层子节点的索引值中，因此在叶子节点中，包括了所有的索引值信息，并且每一个叶子节点都有两个指针，分别指向下一个叶子节点和上一个叶子节点，形成一个双向链表。  
二级索引与主键索引的区别：主键索引的叶子结点存放的都是真实数据，二级索引存放的都是实际数据的主键值。  
假设先走二级索引查询到数据的主键值，然后在通过主键索引查到整行数据。这个过程叫做回表。
1. b+树与b树的区别  
b+树只在叶子结点存放数据，而b树的非叶子节点也存放数据，所以相同磁盘i/o下，能查询到更多的节点。b+树的叶子结点之间采用双链表链接，而b树没有。
2. b+树与二叉树的区别  
二叉树相比b+树高出不少，i/o次数更少。
3. b+树与hash  
Hash 在做等值查询的时候效率贼快，搜索复杂度为 O(1)。但不适合做范围查找。
 - 主键索引  
主键索引就是建立在主键字段上的索引，通常在创建表的时候一起创建，一张表最多只有一个主键索引，索引列的值不允许有空值  
 - 唯一索引  
 唯一索引建立在 UNIQUE 字段上的索引，一张表可以有多个唯一索引，索引列的值必须唯一，但是允许有空值
 - 普通索引 
普通索引就是建立在普通字段上的索引，既不要求字段为主键，也不要求字段为 UNIQUE
 - 前缀索引
前缀索引是指对字符类型字段的前几个字符建立的索引，而不是在整个字段上建立的索引，前缀索引可以建立在字段类型为 char、 varchar、binary、varbinary 的列上。
 - 联合索引  
通过将多个字段组合成一个索引，该索引就被称为联合索引。使用联合索引时，存在最左匹配原则。利用索引的前提是索引里的 key 是有序的。联合索引有一些特殊情况，联合索引的最左匹配原则，在遇到范围查询（如 >、<）的时候，就会停止匹配，也就是范围查询的字段可以用到联合索引，但是在范围查询字段的后面的字段无法用到联合索引。注意，对于 >=、<=、BETWEEN、like 前缀匹配的范围查询，并不会停止匹配。得具体分析。建立联合索引时，要把区分度大的字段排在前面，这样区分度大的字段越有可能被更多的 SQL 使用到。   
索引下推：索引下推优化（index condition pushdown)， 可以在联合索引遍历过程中，对联合索引中包含的字段先做判断，直接过滤掉不满足条件的记录，减少回表次数。  
### 优化索引
 - 前缀索引优化  
在一些大字符串的字段做索引时，可以使用前缀索引
 - 覆盖索引优化  
数据表中的数据争取用一次索引就能查到数据，避免回表。
 - 索引列最好not null
 - 防止索引失效
